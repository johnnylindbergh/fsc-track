<!DOCTYPE html>
<html>
<head>
  <title>Admin Page | {{defaults.sysName}}</title>
  <link rel="stylesheet" type="text/css" href="css/reset.css">
  <link rel="stylesheet" type="text/css" href="css/defaults.css">
  <link rel="stylesheet" type="text/css" href="css/navbar.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
</head>

<body>
  <div class="navbar">
    <ul>
      <li><a href="/">{{defaults.sysName}}</a></li>
      <div style="float:right">
        <li><a href="/auth/google">Log In</a></li>
        <li><a href="/logout">Log Out</a></li>
      </div>
    </ul>
  </div>
  {{#auth}}
  <div class="container">
    <h2>
      {{#message}}
        <p>{{message}}</p>
      {{/message}}
    </h2> 
  </div>
  {{/auth}}
 <div class="container">
    <!-- Job Content Here -->
     <form action="/deleteJob" method = "POST">
      <table>
        <tr>
        <th>Jobs</th>
      </tr>

          {{#jobs}}
            <tr>
              <td>
                <input type="radio" id="jobName" name="jobName" value="{{id}}">
              </td>

              <td>
    <p>{{name}}</p>
              </td>
            </tr>
          {{/jobs}}
      </table>
        <input type="submit" value="Delete Job">
    </form>
  </div>

  <div class="container">
    <!-- add job Content Here -->
      <form action="/addJob" method ="POST">
        <b>Add a Job</b>
          <input name="jobName" type="text" autocomplete="off" placeholder="Enter new Job...">
          <input type="submit" value="Create New Job">
      </form>
  </div>




  <div class="container">
    <!-- task Content Here -->
     <form action="/deleteTask" method = "POST">
      <table>
        <tr>
        <th>Tasks</th>
      </tr>

          {{#tasks}}
            <tr>
              <td>
                <input type="radio" id="taskName" name="taskName" value="{{id}}">
              </td>

              <td>
                <p>{{name}}</p>
              </td>
            </tr>
          {{/tasks}}
      </table>
        <input type="submit" value="Delete task">
    </form>
  </div>

  <div class="container">
    <!-- add task Content Here -->
      <form action="/addTask" method ="POST">
        <b>Add a Task</b>
          <input name="taskName" type="text" autocomplete="off" placeholder="Enter new task...">
          <input type="submit" value="Create New Task">
      </form>
  </div>

<div class="container">
  <!-- qr code generation content here -->
 <a href="/qrGen/1">Generate Job-Task QR Code</a> </br>
</div>
</br>

<div class="searchBar">
<b> Filter Results</b></br>&nbsp;
    <form  id="searchForm" action="/searchTimesheet" method="POST">
  <input type="submit" formaction="default_url_when_press_enter" style="visibility: hidden; display: none;">
          
          <select name="userId" onchange="this.form.submit();">
            <option value="-1">All Users</option>
            {{#users}}
            <option value="{{id}}"{{#selected}}selected{{/selected}}>{{name}}</option>
            {{/users}}
          </select>  

          <select name="jobId" onchange="this.form.submit();">
            <option value="-1">All Jobs</option>
            {{#jobs}}
            <option value="{{id}}"{{#selected}}selected{{/selected}}>{{name}}</option>
            {{/jobs}}
          </select>  


          <select  name="taskId" onchange="this.form.submit();">
            <option value="-1">All Tasks</option>
            {{#tasks}}
            <option value="{{id}}"{{#selected}}selected{{/selected}}>{{name}}</option>
            {{/tasks}}
          </select>

          
            <b>From:</b> <input type="date" name="startDate" value="{{startDate}}"><b>To:</b>&nbsp;
          
            <input type="date" name="endDate" value="{{endDate}}">

          <button type="submit" name="search" formaction="/searchTimesheet"><i class="fas fa-search"> </i></button>
          <button type="submit" name="download" formaction="/searchTimesheetToCSV"><i class="fas fa-download"> </i></button>
        </form>
</div>

<div class = "container">
  <table>
    <th>
      <tr>
       <td>
        Start Time
      </td>
         <td>
        End Time
      </td>
       <td>
        Job - task
      </td>
        <td>        
        Name
      </td>
       <td>
        Duration
      </td>
    </tr>
    </th>
    {{#results}}
          <tr>
            <td>{{clock_in}}</td>
            <td>{{clock_out}}</td>
            <td>{{name}} - {{taskname}}</td>
            <td>{{username}}</td>
             <td>{{formattedDuration}}</td>
          </tr>
    {{/results}}
  </table>

</div>

<div class="container">
  <h3>Inventory</h3>
  <form action="/updateInventory" method="POST">
    <table>
    <th>
      <tr>
       <td>
        Item
      </td>
        <td>
          Quantity   
        </td>
        <td>
          Reorder
        </td>
        <td>
          <p title="when the threshold is reached, order requests will be sent"> Order Threshold</p>
        </td>  
    </tr>
    </th>
    {{#inventory}}
          <tr>
            <td><input name="item_name" type="text" autocomplete="off" placeholder="{{name}}" onchange="this.form.submit();" ></td>
            <td><input name="quantity" type="text" autocomplete="off" placeholder="{{quantity}}" onchange="this.form.submit();" ></td>
          
              <td><input name="reorder" type="checkbox" onchange="this.form.submit()" {{#reorder}}checked{{/reorder}}></td>
            <td><input name="threshold" type="text" autocomplete="off" placeholder="{{threshold}}" onchange="this.form.submit();" ></td>
             <td></td>
          </tr>
    {{/inventory}}
  </table>
</form>
</div>

  <div class="container">
    <!-- add inventory Content Here -->
      <form action="/addInventoryItem" method ="POST">
        <b>Add an inventory Item</b>
          <input name="itemName" type="text" autocomplete="off" placeholder="Enter new inventory item...">
           <input name="quantity" type="text" autocomplete="off" placeholder="Enter a quantity">
          <input type="submit" value="Create New Inventory Item">
      </form>
  </div>

<div class="container">
  <h3>Order Email Options</h3>
  {{#email}}
  {{/email}}
</div>



<div class="container">
  <h3>Users</h3>
  <form action="/updateUsers" method="POST">
    <table>
    <th>
      <tr>
       <td>
        Name
      </td>
        <td>
          User Type   
        </td>
        <td>
          Email
        </td>
        <td>
          This Weeks Hours
        </td>
        <td>
          Phone Number
        </td>  
        <td>
          clocked In
        </td>  
    </tr>
    </th>
    {{#users}}
          <tr>
            <td>
              <input name="name" type="text" autocomplete="off" placeholder="{{name}}" onchange="this.form.submit();" >
            </td>
            <td>
              <input name="user_type" type="text" autocomplete="off" placeholder="{{user_type}}" onchange="this.form.submit();" >
            </td>
            <td>
              <input name="email" type="text" autocomplete="off" placeholder="{{email}}" onchange="this.form.submit();" >
            </td>
             <td>
              {{this_weeks_hours}}
            </td>
            <td>
              <input name="phone_number" type="text" autocomplete="off" placeholder="{{phone_number}}" onchange="this.form.submit();" >
            </td>
             <td>{{clocked_in}}</td>
          </tr>
    {{/users}}
  </table>
</form>
</div>





</body>
</html>
